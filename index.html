<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aging Aces</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Latest CDN production JavaScript and CSS -->
<script src="https://global.oktacdn.com/okta-signin-widget/6.2.0/js/okta-sign-in.min.js" type="text/javascript"></script>
<link href="https://global.oktacdn.com/okta-signin-widget/6.2.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet"/>
</head>
<body>
    <h1>Aging Aces</h1>
    <p>User name:</p>
    <p>Password:</p>
    <a href="/portal.html">Login</a>

    <div id="okta-login-container"></div>
    <script type="text/javascript">
        const oktaSignIn = new OktaSignIn({
          issuer: "dev-81478961.okta.com",
          redirectUri: "https://llouis13.github.io/AgingAces/portal",
          clientId: "0oa4fxvya295ZN4qM5d7",
          useInteractionCodeFlow: true
        });
  
        oktaSignIn.authClient.token.getUserInfo().then(function(user) {
          document.getElementById("messageBox").innerHTML = "Hello, " + user.email + "! You are *still* logged in! :)";
          document.getElementById("logout").style.display = 'block';
        }, function(error) {
          oktaSignIn.showSignInToGetTokens({
            el: '#okta-login-container'
          }).then(function(tokens) {
            oktaSignIn.authClient.tokenManager.setTokens(tokens);
            oktaSignIn.remove();
  
            const idToken = tokens.idToken;
            document.getElementById("messageBox").innerHTML = "Hello, " + idToken.claims.email + "! You just logged in! :)";
            document.getElementById("logout").style.display = 'block';
  
          }).catch(function(err) {
            console.error(err);
          });
        });
  
        function logout() {
          oktaSignIn.authClient.signOut();
          location.reload();
        }
      </script>
</body>
</html>